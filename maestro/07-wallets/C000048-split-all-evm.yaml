# Priority: Critical
# Test ID: C000048
# Title: Split EVM networks available
# Expected Result:
#   1. Split wallet option appears for Ethereum wallet
#   2. All expected EVM networks are visible in the split wallet list
#   3. No errors when splitting to all supported EVM networks

appId: ${MAESTRO_APP_ID}
tags:
- all
- C000048
---
- runFlow:
    file: ../common/launch-cleared.yaml
- runFlow:
    file: ../common/create-account.yaml
    env:
      NEW_WALLETS: '["Ethereum"]'
- runFlow:
    file: ../common/dismiss-modals.yaml

# Navigate to Ethereum wallet
- tapOn: Assets
- scrollUntilVisible:
    element: "My Ether"
    direction: DOWN
    timeout: 10000

# Open wallet options menu
- longPressOn: "My Ether"

# Verify split option is available and tap it
- tapOn: ".*Split Wallet"

# Verify split wallet scene
- assertVisible: Create Wallet From Seed
- assertVisible: Search Wallets

# Define expected EVM networks (ordered for scrolling down)
- evalScript: |
    ${var evmNetworks = [
      "zkSync",
      "Optimism",
      "Ethereum Classic",
      "Rootstock",
      "Fantom",
      "Polygon",
      "Avalanche",
      "BNB Smart Chain",
      "BOB",
      "Abstract",
      "Arbitrum One",
      "Base",
      "Botanix Bitcoin",
      "Celo",
      "EthereumPoW",
      "Filecoin FEVM",
      "HyperEVM",
      "PulseChain",
      "Sonic"
    ]}

# Loop over each network and scroll until visible
- evalScript: ${var index = 0}
- repeat:
    times: ${evmNetworks.length}
    commands:
      - scrollUntilVisible:
          element: ${".*" + evmNetworks[index]}
          direction: DOWN
          centerElement: true
          speed: 10
          timeout: 10000
      - tapOn: ${".*" + evmNetworks[index]}
      - evalScript: ${index++}

- tapOn: Next

- tapOn: 
    text: Split Wallet
    index: 1

- extendedWaitUntil:
    visible: Assets
    timeout: 25000

- runFlow:
    file: ../common/no-errors.yaml


- stopApp

